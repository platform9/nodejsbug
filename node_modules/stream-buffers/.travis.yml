language: node_js
sudo: false
cache:
  directories:
  - node_modules
matrix:
  include:
  - node_js: '0.10'
  - node_js: '0.12'
  - node_js: '4.2'
  - node_js: '5.0'
    env: npm_config_coverage=1
addons:
  code_climate:
    repo_token:
      secure: "qoQoeJZrjiE7RmcGIZNmR2tO3/oP1NqlxhYkj1TYbMVOYmK4zsOdeVjhllkETZaGejKcw1uXEQx7caSmpZQ6lw5V5JXmyyTzo8xfAbanP9Wf4WXw5uSOaBDYR/DR2B9VfkHT7spPVwdoX09sgb+oTIy4IgBUivucm6IGmiw7PuY="
after_success: |
  if [ -n "$npm_config_coverage" ]; then
    npm install -g codeclimate-test-reporter
    codeclimate-test-reporter < coverage/lcov.info
  fi
deploy:
  provider: npm
  email: me@samcday.com.au
  api_key:
    secure: GIkpHAQZJH8xTq1oRG66f+J0j4PMxEBoDzIiOyREBypGslOy6NbWxP0Q8rgD6wfzBRMixSctqeiKyTkiC+92BGPLL7k1eyeN9ycXjYHuDVJrRyYAMjg1Xh72ekFPZnycgUngMTwWX/FtQShkvaDoG+1S0W+qdC+cRz+9Dh7+XEM=
  on:
    tags: true
    all_branches: true
    node_js: 5.0
